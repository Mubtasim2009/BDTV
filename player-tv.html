<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BDTV VOD – TV Player</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="icon" type="image/webp" href="/assets/Brand/LOGO.webp" />

  <style>
    :root {
      color-scheme: dark;
      --bg-main: #020916;
      --accent: #e50914;
      --text-main: #f5f5f5;
      --text-muted: #a7b0c5;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #101933 0, #020916 55%);
      color: var(--text-main);
      display: flex;
      flex-direction: column;
    }

    a { color: inherit; text-decoration: none; }

    .top-nav {
      padding: 1.1rem 5vw 0.4rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1.5rem;
      flex-shrink: 0;
    }

    .top-brand {
      display:flex;
      align-items:center;
      gap:0.65rem;
    }

    .top-brand img {
      height:32px;
      width:auto;
      display:block;
    }

    .top-right {
      display:flex;
      align-items:center;
      gap:0.8rem;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .nav-links {
      display:flex;
      gap:1rem;
      font-size:0.9rem;
      color:var(--text-muted);
      flex-wrap:wrap;
    }

    .nav-links a {
      padding:0.25rem 0.7rem;
      border-radius:999px;
    }

    .nav-links a.active {
      color:#f5f5f5;
      background:rgba(255,255,255,0.05);
    }

    .live-btn-nav {
      padding:0.4rem 0.9rem;
      border-radius:999px;
      border:none;
      font-size:0.85rem;
      font-weight:600;
      cursor:pointer;
      background:linear-gradient(135deg,#ffb800,#ff6a00);
      color:#111;
      box-shadow:0 8px 24px rgba(0,0,0,0.6);
      white-space:nowrap;
    }

    main {
      flex:1;
      padding:0.4rem 5vw 1.6rem;
      display:grid;
      grid-template-columns:minmax(0,2.3fr) minmax(0,1.3fr);
      gap:1.3rem;
    }

    .player-card {
      background: rgba(4, 8, 24, 0.96);
      border-radius: 1.1rem;
      border: 1px solid rgba(255,255,255,0.06);
      padding: 0.8rem 0.9rem 0.9rem;
      box-shadow: 0 18px 50px rgba(0,0,0,0.85);
      display:flex;
      flex-direction:column;
      gap:0.6rem;
    }

    .title {
      font-size:1.1rem;
      font-weight:600;
      margin-bottom:0.1rem;
    }

    .meta {
      font-size:0.85rem;
      color:var(--text-muted);
      margin-bottom:0.3rem;
    }

    .vidking-wrapper {
      position: relative;
      width: 100%;
      max-width: 100%;
      aspect-ratio: 16 / 9;
      border-radius: 0.9rem;
      overflow: hidden;
      background:#000;
      box-shadow:0 18px 45px rgba(0,0,0,0.9);
    }

    .vidking-wrapper iframe {
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
    }

    .disclaimer {
      font-size:0.8rem;
      color:var(--text-muted);
      margin-top:0.25rem;
    }

    .info-card {
      background: rgba(4, 8, 24, 0.96);
      border-radius: 1.1rem;
      border: 1px solid rgba(255,255,255,0.06);
      padding: 0.9rem 0.9rem 1rem;
      box-shadow: 0 18px 50px rgba(0,0,0,0.85);
      display:flex;
      flex-direction:column;
      gap:0.6rem;
    }

    .poster-wrapper {
      display:flex;
      gap:0.9rem;
      align-items:flex-start;
    }

    .poster-wrapper img {
      width:130px;
      border-radius:0.6rem;
      box-shadow:0 12px 35px rgba(0,0,0,0.9);
      object-fit:cover;
    }

    .tags {
      display:flex;
      flex-wrap:wrap;
      gap:0.3rem;
      font-size:0.8rem;
      color:var(--text-muted);
    }

    .tag-chip {
      padding:0.15rem 0.5rem;
      border-radius:999px;
      background:rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.08);
    }

    .overview {
      font-size:0.85rem;
      color:var(--text-muted);
      line-height:1.45;
      margin-top:0.3rem;
      max-width:32rem;
    }

    footer {
      padding: 0.8rem 5vw 1.2rem;
      font-size: 0.75rem;
      color: var(--text-muted);
      border-top: 1px solid rgba(255,255,255,0.05);
      text-align:center;
    }

    @media (max-width: 900px) {
      main {
        grid-template-columns:1fr;
      }
    }

    @media (max-width: 768px) {
      .top-nav {
        padding-inline:4vw;
        flex-wrap:wrap;
      }
      .top-right { justify-content:flex-start; }

      main {
        padding-inline:4vw;
      }

      .title { font-size:1rem; }
      .meta  { font-size:0.8rem; }

      .poster-wrapper { gap:0.6rem; }
      .poster-wrapper img { width:120px; }

      .overview {
        font-size:0.85rem;
        max-width:none;
      }
    }

    @media (max-width: 480px) {
      .poster-wrapper img { width:110px; }
      .title { font-size:0.95rem; }

      .nav-links {
        font-size:0.8rem;
        gap:0.5rem;
      }
      .nav-links a {
        padding:0.2rem 0.5rem;
      }
      .live-btn-nav {
        padding:0.35rem 0.8rem;
        font-size:0.78rem;
      }
    }
  </style>
</head>
<body>
  <header class="top-nav">
    <a href="index.html" class="top-brand">
      <img src="https://iptv.moonim.live/assets/Brand/LOGO.webp" alt="BDTV VOD logo" />
    </a>
    <div class="top-right">
      <nav class="nav-links">
        <a href="index.html" class="nav-home active">Home</a>
        <a href="search.html" class="nav-search">Search</a>
        <a href="about.html" class="nav-about">About</a>
      </nav>
      <button class="live-btn-nav" onclick="window.location.href='live.html'">Live TV</button>
    </div>
  </header>

  <main>
    <section class="player-card">
      <div class="title" id="tvTitle">Loading…</div>
      <div class="meta" id="tvMeta"></div>

      <div class="vidking-wrapper">
        <iframe
          id="tvFrame"
          width="100%"
          height="100%"
          frameborder="0"
          allowfullscreen
          referrerpolicy="no-referrer">
        </iframe>
      </div>

      <p class="disclaimer">
        Streams are provided by a third‑party host and may contain their own ads or external links.
      </p>
    </section>

    <aside class="info-card">
      <div class="poster-wrapper">
        <img id="posterImg" src="" alt="Poster" />
        <div>
          <div class="tags" id="tvTags"></div>
          <div class="overview" id="tvOverview"></div>
        </div>
      </div>
    </aside>
  </main>

  <footer>BDTV VOD.</footer>

  <script>
    const TMDB_API_KEY = "b14194d00ce48c36318eefa745bcdeec";
    const TMDB_BASE = "https://api.themoviedb.org/3";
    const TMDB_IMG_BASE = "https://image.tmdb.org/t/p/w300";

    function getTvIdFromUrl() {
      const url = new URL(window.location.href);
      return url.searchParams.get("id");
    }

    async function fetchJson(url) {
      const res = await fetch(url);
      if (!res.ok) throw new Error("TMDB error " + res.status);
      return res.json();
    }

    async function loadTvShow() {
      const tvId = getTvIdFromUrl() || "119051";
      if (!TMDB_API_KEY) {
        document.getElementById("tvTitle").textContent = "TV Player";
        return;
      }

      try {
        const url = `${TMDB_BASE}/tv/${encodeURIComponent(tvId)}?api_key=${TMDB_API_KEY}&language=en-US`;
        const data = await fetchJson(url);

        const name = data.name || "Untitled";
        const year = data.first_air_date ? data.first_air_date.slice(0,4) : "";
        const rating = data.vote_average ? `⭐ ${data.vote_average.toFixed(1)}` : "";

        document.getElementById("tvTitle").textContent = name;
        document.getElementById("tvMeta").textContent =
          [year, rating].filter(Boolean).join(" • ");

        const tagContainer = document.getElementById("tvTags");
        tagContainer.innerHTML = "";
        (data.genres || []).forEach(g => {
          const span = document.createElement("span");
          span.className = "tag-chip";
          span.textContent = g.name;
          tagContainer.appendChild(span);
        });

        document.getElementById("tvOverview").textContent =
          data.overview || "No overview available.";

        const posterImg = document.getElementById("posterImg");
        if (data.poster_path) {
          posterImg.src = TMDB_IMG_BASE + data.poster_path;
        } else {
          posterImg.src = "https://via.placeholder.com/300x450?text=No+Image";
        }
        posterImg.alt = name + " poster";

        const defaultSeason = 1;
        const defaultEpisode = 1;

        const params = new URLSearchParams({
          color: "e50914",
          autoPlay: "true",
          nextEpisode: "true",
          episodeSelector: "true",
        });

        const tvFrame = document.getElementById("tvFrame");
        tvFrame.src = `https://www.vidking.net/embed/tv/${encodeURIComponent(tvId)}/${defaultSeason}/${defaultEpisode}?${params.toString()}`;

      } catch (err) {
        console.error(err);
        document.getElementById("tvTitle").textContent = "Failed to load TV details.";
      }
    }

    loadTvShow();
  </script>
</body>

</html>

